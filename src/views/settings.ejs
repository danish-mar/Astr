<div x-data="settingsData" x-init="init()" class="space-y-8 pb-20">
    <!-- Premium Header -->
    <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
        <div>
            <h1 class="text-2xl font-bold text-slate-900 tracking-tight">Shop Settings</h1>
            <p class="text-slate-500 text-sm mt-1">Manage your shop identity, team, and AI configurations.</p>
        </div>
        <div class="flex items-center gap-3 bg-white border border-slate-200 p-2 rounded-2xl shadow-sm">
            <div class="w-10 h-10 rounded-xl bg-emerald-50 flex items-center justify-center text-emerald-600">
                <i class="fas fa-check-circle text-lg"></i>
            </div>
            <div class="pr-4">
                <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest">System Status</p>
                <p class="text-xs font-bold text-slate-900">Registry Active</p>
            </div>
        </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
        <!-- Premium Navigation -->
        <div class="lg:col-span-3">
            <nav class="sticky top-8 flex flex-col gap-2">
                <button @click="activeTab = 'general'"
                    class="w-full flex items-center gap-4 p-4 rounded-2xl transition-all group border"
                    :class="activeTab === 'general' ? 'bg-primary-600 border-primary-600 text-white shadow-purple' : 'bg-white border-slate-200 text-slate-500 hover:border-primary-200 hover:text-primary-600'">
                    <div class="w-10 h-10 rounded-xl flex items-center justify-center transition-colors"
                        :class="activeTab === 'general' ? 'bg-white/10' : 'bg-slate-50 group-hover:bg-primary-50'">
                        <i class="fas fa-store text-sm"></i>
                    </div>
                    <span class="text-sm font-semibold">Shop Identity</span>
                </button>

                <button @click="activeTab = 'users'"
                    class="w-full flex items-center gap-4 p-4 rounded-2xl transition-all group border"
                    :class="activeTab === 'users' ? 'bg-primary-600 border-primary-600 text-white shadow-purple' : 'bg-white border-slate-200 text-slate-500 hover:border-primary-200 hover:text-primary-600'">
                    <div class="w-10 h-10 rounded-xl flex items-center justify-center transition-colors"
                        :class="activeTab === 'users' ? 'bg-white/10' : 'bg-slate-50 group-hover:bg-primary-50'">
                        <i class="fas fa-users-cog text-sm"></i>
                    </div>
                    <span class="text-sm font-semibold">Team Ledger</span>
                </button>

                <button @click="activeTab = 'ai'"
                    class="w-full flex items-center gap-4 p-4 rounded-2xl transition-all group border"
                    :class="activeTab === 'ai' ? 'bg-primary-600 border-primary-600 text-white shadow-purple' : 'bg-white border-slate-200 text-slate-500 hover:border-primary-200 hover:text-primary-600'">
                    <div class="w-10 h-10 rounded-xl flex items-center justify-center transition-colors"
                        :class="activeTab === 'ai' ? 'bg-white/10' : 'bg-slate-50 group-hover:bg-primary-50'">
                        <i class="fas fa-robot text-sm"></i>
                    </div>
                    <span class="text-sm font-semibold">AI Protocol</span>
                </button>
            </nav>
        </div>

        <!-- Content Area -->
        <div class="lg:col-span-9">
            <!-- General Section -->
            <div x-show="activeTab === 'general'" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 translate-y-4" x-transition:enter-end="opacity-100 translate-y-0" class="space-y-6">
                <div class="bg-white border border-slate-200 p-8 md:p-10 rounded-[32px] shadow-glass">
                    <div class="flex items-center gap-4 mb-10">
                        <div class="w-12 h-12 rounded-2xl bg-primary-50 flex items-center justify-center text-primary-600">
                            <i class="fas fa-id-card text-xl"></i>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold text-slate-900">Shop Identity</h3>
                            <p class="text-slate-500 text-sm">Your public store metadata</p>
                        </div>
                    </div>

                    <form @submit.prevent="saveSettings()" class="space-y-8">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <div class="space-y-2">
                                <label class="text-xs font-bold text-slate-500 ml-1">Official Shop Name</label>
                                <input type="text" x-model="settings.shopName" required
                                    class="block w-full px-5 py-4 bg-slate-50 border border-slate-100 rounded-2xl font-medium focus:ring-4 focus:ring-primary-500/5 focus:border-primary-500 focus:bg-white outline-none transition-all">
                            </div>

                            <div class="space-y-2">
                                <label class="text-xs font-bold text-slate-500 ml-1">Primary Brand Color</label>
                                <div class="flex items-center gap-4 bg-slate-50 p-2 border border-slate-100 rounded-2xl">
                                    <input type="color" x-model="settings.themeColor"
                                        class="h-10 w-16 border-none cursor-pointer bg-transparent">
                                    <span class="text-xs font-bold text-slate-900 uppercase tracking-widest" x-text="settings.themeColor"></span>
                                </div>
                            </div>

                            <div class="space-y-2">
                                <label class="text-xs font-bold text-slate-500 ml-1">Support Phone</label>
                                <input type="tel" x-model="settings.phone"
                                    class="block w-full px-5 py-4 bg-slate-50 border border-slate-100 rounded-2xl font-medium focus:ring-4 focus:ring-primary-500/5 focus:border-primary-500 focus:bg-white outline-none transition-all">
                            </div>

                            <div class="space-y-2">
                                <label class="text-xs font-bold text-slate-500 ml-1">Support Email</label>
                                <input type="email" x-model="settings.email"
                                    class="block w-full px-5 py-4 bg-slate-50 border border-slate-100 rounded-2xl font-medium focus:ring-4 focus:ring-primary-500/5 focus:border-primary-500 focus:bg-white outline-none transition-all">
                            </div>

                            <div class="md:col-span-2 space-y-2">
                                <label class="text-xs font-bold text-slate-500 ml-1">Google Review / Rating Link</label>
                                <input type="url" x-model="settings.reviewUrl" placeholder="https://g.page/r/your-link/review"
                                    class="block w-full px-5 py-4 bg-slate-50 border border-slate-100 rounded-2xl font-medium focus:ring-4 focus:ring-primary-500/5 focus:border-primary-500 focus:bg-white outline-none transition-all">
                            </div>

                            <div class="md:col-span-2 space-y-2">
                                <label class="text-xs font-bold text-slate-500 ml-1">Shop Address</label>
                                <textarea x-model="settings.address" rows="3"
                                    class="block w-full px-5 py-4 bg-slate-50 border border-slate-100 rounded-2xl font-medium focus:ring-4 focus:ring-primary-500/5 focus:border-primary-500 focus:bg-white outline-none transition-all resize-none"></textarea>
                            </div>
                        </div>

                        <div class="flex justify-end pt-4">
                            <button type="submit" :disabled="saving"
                                class="px-8 py-4 bg-primary-600 text-white rounded-2xl font-bold text-sm hover:bg-primary-700 active:scale-95 transition-all shadow-purple flex items-center gap-3">
                                <i :class="saving ? 'fas fa-spinner fa-spin' : 'fas fa-save'"></i>
                                <span x-text="saving ? 'Saving...' : 'Save Changes'"></span>
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Team Section -->
            <div x-show="activeTab === 'users'" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 translate-y-4" x-transition:enter-end="opacity-100 translate-y-0" class="space-y-6">
                <div class="bg-white border border-slate-200 p-8 md:p-10 rounded-[32px] shadow-glass">
                    <div class="flex items-center gap-4 mb-10">
                        <div class="w-12 h-12 rounded-2xl bg-indigo-50 flex items-center justify-center text-indigo-600">
                            <i class="fas fa-users text-xl"></i>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold text-slate-900">Team Ledger</h3>
                            <p class="text-slate-500 text-sm">Manage staff access and permissions</p>
                        </div>
                    </div>

                    <div class="p-10 border-2 border-dashed border-slate-100 rounded-[28px] flex flex-col items-center justify-center text-center space-y-6 bg-slate-50/50">
                        <div class="w-20 h-20 rounded-3xl bg-white border border-slate-100 shadow-sm flex items-center justify-center text-primary-500">
                            <i class="fas fa-user-shield text-3xl"></i>
                        </div>
                        <div class="space-y-2">
                            <h4 class="text-lg font-bold text-slate-900">Centralized Team Management</h4>
                            <p class="text-sm text-slate-500 max-w-sm mx-auto">
                                Staff and permission protocols are managed in a dedicated secure session.
                            </p>
                        </div>
                        <a href="/team" class="px-8 py-4 bg-slate-900 text-white rounded-2xl font-bold text-sm hover:bg-black active:scale-95 transition-all shadow-lg flex items-center gap-3">
                            Access Team Workspace <i class="fas fa-arrow-right text-xs"></i>
                        </a>
                    </div>
                </div>
            </div>

            <!-- AI Section -->
            <div x-show="activeTab === 'ai'" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 translate-y-4" x-transition:enter-end="opacity-100 translate-y-0" class="space-y-6">
                <div class="bg-white border border-slate-200 p-8 md:p-10 rounded-[32px] shadow-glass">
                    <div class="flex items-center gap-4 mb-10">
                        <div class="w-12 h-12 rounded-2xl bg-purple-50 flex items-center justify-center text-purple-600">
                            <i class="fas fa-bolt text-xl"></i>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold text-slate-900">AI Intelligence</h3>
                            <p class="text-slate-500 text-sm">Configure neural content engines</p>
                        </div>
                    </div>

                    <form @submit.prevent="saveSettings()" class="space-y-8">
                        <div class="flex items-center justify-between p-6 bg-slate-50 border border-slate-100 rounded-3xl">
                            <div>
                                <h4 class="text-sm font-bold text-slate-900">Neural Engine</h4>
                                <p class="text-xs text-slate-500 mt-1">Enable AI for product descriptions</p>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" x-model="settings.aiEnabled" class="sr-only peer">
                                <div class="w-14 h-8 bg-slate-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[4px] after:left-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-primary-600"></div>
                            </label>
                        </div>

                        <div class="space-y-6" x-show="settings.aiEnabled">
                            <div class="space-y-2">
                                <label class="text-xs font-bold text-slate-500 ml-1">Intelligence Provider</label>
                                <div class="relative">
                                    <select x-model="settings.aiProvider"
                                        class="block w-full px-5 py-4 bg-slate-50 border border-slate-100 rounded-2xl font-medium focus:ring-4 focus:ring-primary-500/5 focus:border-primary-500 focus:bg-white outline-none transition-all appearance-none cursor-pointer">
                                        <option value="none">Disabled</option>
                                        <option value="gemini">Google Gemini AI</option>
                                        <option value="openai">OpenAI ChatGPT</option>
                                    </select>
                                    <div class="absolute right-5 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400">
                                        <i class="fas fa-chevron-down text-xs"></i>
                                    </div>
                                </div>
                            </div>

                            <div class="space-y-2" x-show="settings.aiProvider !== 'none'">
                                <label class="text-xs font-bold text-slate-500 ml-1">Auth Token / API Key</label>
                                <div class="relative">
                                    <input :type="showApiKey ? 'text' : 'password'" x-model="settings.aiApiKey"
                                        placeholder="Enter your key here..."
                                        class="block w-full px-5 py-4 pr-14 bg-slate-50 border border-slate-100 rounded-2xl font-mono text-xs focus:ring-4 focus:ring-primary-500/5 focus:border-primary-500 focus:bg-white outline-none transition-all">
                                    <button type="button" @click="showApiKey = !showApiKey"
                                        class="absolute right-5 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600">
                                        <i :class="showApiKey ? 'fas fa-eye-slash' : 'fas fa-eye'" class="text-sm"></i>
                                    </button>
                                </div>
                            </div>

                            <div class="flex items-center justify-between gap-4" x-show="settings.aiProvider !== 'none'">
                                <button type="button" @click="testAIConnection()" :disabled="testingConnection"
                                    class="px-6 py-3 bg-white border border-slate-200 text-slate-600 rounded-2xl text-[11px] font-bold uppercase tracking-wider hover:bg-slate-50 active:scale-95 transition-all flex items-center gap-3">
                                    <i :class="testingConnection ? 'fas fa-spinner fa-spin' : 'fas fa-plug'"></i>
                                    <span x-text="testingConnection ? 'Testing...' : 'Test Link'"></span>
                                </button>

                                <div x-show="connectionTestResult" class="flex items-center gap-2 animate__animated animate__fadeIn">
                                    <div class="w-1.5 h-1.5 rounded-full" :class="connectionTestSuccess ? 'bg-emerald-500' : 'bg-rose-500'"></div>
                                    <span class="text-[10px] font-bold" :class="connectionTestSuccess ? 'text-emerald-600' : 'text-rose-600'" x-text="connectionTestMessage"></span>
                                </div>
                            </div>
                        </div>

                        <div class="flex justify-end pt-4" x-show="settings.aiEnabled">
                            <button type="submit" :disabled="saving"
                                class="px-8 py-4 bg-purple-600 text-white rounded-2xl font-bold text-sm hover:bg-purple-700 active:scale-95 transition-all shadow-lg flex items-center gap-3">
                                <i :class="saving ? 'fas fa-spinner fa-spin' : 'fas fa-shield-halved'"></i>
                                <span x-text="saving ? 'Updating...' : 'Save AI Protocol'"></span>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="/js/pages/settings.js"></script>